<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SecureChat - 群组管理</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.min.js"></script>
    <link rel="stylesheet" href="securechat_theme.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        .group-list {
            padding: 20px;
            height: 680px;
            overflow-y: auto;
        }
        
        .group-item {
            background-color: var(--card);
            border: 1px solid var(--border);
            border-radius: var(--radius-lg);
            padding: 20px;
            margin-bottom: 16px;
            transition: all 0.3s ease;
            cursor: pointer;
        }
        
        .group-item:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
            border-color: var(--primary);
        }
        
        .group-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 16px;
        }
        
        .group-info {
            display: flex;
            align-items: center;
            gap: 16px;
        }
        
        .group-avatar {
            width: 50px;
            height: 50px;
            border-radius: var(--radius-lg);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            font-weight: bold;
        }
        
        .group-details h3 {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 4px;
        }
        
        .group-meta {
            display: flex;
            align-items: center;
            gap: 12px;
            font-size: 14px;
            color: var(--muted-foreground);
        }
        
        .member-avatars {
            display: flex;
            margin-top: 12px;
            gap: 8px;
        }
        
        .member-avatar {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            font-weight: 600;
            border: 2px solid var(--background);
        }
        
        .member-avatar:not(:first-child) {
            margin-left: -8px;
        }
        
        .more-members {
            background-color: var(--muted);
            color: var(--muted-foreground);
        }
        
        .group-actions {
            display: flex;
            gap: 8px;
        }
        
        .action-btn {
            padding: 8px;
            border-radius: var(--radius);
            border: 1px solid var(--border);
            background-color: var(--background);
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .action-btn:hover {
            background-color: var(--muted);
        }
        
        .create-group-btn {
            position: fixed;
            bottom: 80px;
            right: 40px;
            width: 56px;
            height: 56px;
            border-radius: 50%;
            background-color: var(--primary);
            color: var(--primary-foreground);
            border: none;
            cursor: pointer;
            box-shadow: var(--shadow-lg);
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .create-group-btn:hover {
            transform: scale(1.1);
            box-shadow: var(--shadow-xl);
        }
        
        .search-section {
            padding: 20px;
            border-bottom: 1px solid var(--border);
            background-color: var(--background);
            position: sticky;
            top: 0;
            z-index: 10;
        }
        
        .filter-tabs {
            display: flex;
            gap: 8px;
            margin-top: 16px;
        }
        
        .filter-tab {
            padding: 8px 16px;
            border-radius: var(--radius);
            border: 1px solid var(--border);
            background-color: var(--card);
            color: var(--foreground);
            cursor: pointer;
            transition: all 0.2s ease;
            font-size: 14px;
        }
        
        .filter-tab.active {
            background-color: var(--primary);
            color: var(--primary-foreground);
            border-color: var(--primary);
        }
        
        .filter-tab:hover:not(.active) {
            background-color: var(--muted);
        }
        
        .group-stats {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 16px;
            margin-bottom: 16px;
        }
        
        .stat-card {
            background-color: var(--card);
            border: 1px solid var(--border);
            border-radius: var(--radius);
            padding: 16px;
            text-align: center;
        }
        
        .stat-number {
            font-size: 24px;
            font-weight: bold;
            color: var(--primary);
        }
        
        .stat-label {
            font-size: 12px;
            color: var(--muted-foreground);
            margin-top: 4px;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- 顶部导航栏 -->
        <div class="header">
            <div class="flex items-center space-x-3">
                <button class="p-2 hover:bg-muted rounded-lg transition-colors" onclick="history.back()">
                    <i data-lucide="arrow-left" class="icon"></i>
                </button>
                <i data-lucide="users" class="icon text-primary"></i>
                <span class="text-lg font-semibold">群组管理</span>
            </div>
            <div class="flex items-center space-x-4">
                <button class="p-2 hover:bg-muted rounded-lg transition-colors">
                    <i data-lucide="plus-circle" class="icon"></i>
                </button>
                <button class="p-2 hover:bg-muted rounded-lg transition-colors">
                    <i data-lucide="settings" class="icon"></i>
                </button>
            </div>
        </div>

        <!-- 主内容区域 -->
        <div class="main-content" style="height: 680px; overflow-y: auto; padding: 0;">
            <!-- 搜索和筛选区域 -->
            <div class="search-section">
                <div class="relative mb-4">
                    <i data-lucide="search" class="absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"></i>
                    <input type="text" class="input w-full pl-10" placeholder="搜索群组..." id="searchInput">
                </div>
                
                <!-- 统计卡片 -->
                <div class="group-stats">
                    <div class="stat-card">
                        <div class="stat-number" id="totalGroups">8</div>
                        <div class="stat-label">总群组</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="activeGroups">5</div>
                        <div class="stat-label">活跃群组</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="totalMembers">45</div>
                        <div class="stat-label">总成员</div>
                    </div>
                </div>
                
                <div class="filter-tabs">
                    <button class="filter-tab active" data-filter="all">全部群组</button>
                    <button class="filter-tab" data-filter="active">活跃群组</button>
                    <button class="filter-tab" data-filter="owned">我创建的</button>
                    <button class="filter-tab" data-filter="muted">已静音</button>
                </div>
            </div>

            <!-- 群组列表 -->
            <div class="group-list">
                <!-- 群组项目 -->
                <div class="group-item" data-status="active" data-type="owned">
                    <div class="group-header">
                        <div class="group-info">
                            <div class="group-avatar" style="background-color: var(--primary);">
                                <i data-lucide="briefcase" style="color: var(--primary-foreground); width: 20px; height: 20px;"></i>
                            </div>
                            <div class="group-details">
                                <h3>项目开发组</h3>
                                <div class="group-meta">
                                    <span>8名成员</span>
                                    <span>•</span>
                                    <span>今天 14:30</span>
                                    <span>•</span>
                                    <div class="flex items-center gap-1">
                                        <i data-lucide="shield-check" class="w-3 h-3 text-success"></i>
                                        <span class="encrypted-indicator">已加密</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="group-actions">
                            <button class="action-btn">
                                <i data-lucide="message-circle" class="w-4 h-4"></i>
                            </button>
                            <button class="action-btn">
                                <i data-lucide="settings" class="w-4 h-4"></i>
                            </button>
                            <button class="action-btn">
                                <i data-lucide="more-vertical" class="w-4 h-4"></i>
                            </button>
                        </div>
                    </div>
                    <p class="text-sm text-muted-foreground mb-3">张三: 今天的代码审查会议安排在下午3点</p>
                    <div class="member-avatars">
                        <div class="member-avatar" style="background-color: var(--primary);">张</div>
                        <div class="member-avatar" style="background-color: var(--accent);">李</div>
                        <div class="member-avatar" style="background-color: var(--warning);">王</div>
                        <div class="member-avatar" style="background-color: #8b5cf6;">赵</div>
                        <div class="member-avatar more-members">+4</div>
                    </div>
                </div>

                <div class="group-item" data-status="active" data-type="member">
                    <div class="group-header">
                        <div class="group-info">
                            <div class="group-avatar" style="background-color: var(--accent);">
                                <i data-lucide="code" style="color: white; width: 20px; height: 20px;"></i>
                            </div>
                            <div class="group-details">
                                <h3>技术讨论组</h3>
                                <div class="group-meta">
                                    <span>15名成员</span>
                                    <span>•</span>
                                    <span>昨天 22:15</span>
                                    <span>•</span>
                                    <div class="flex items-center gap-1">
                                        <i data-lucide="shield-check" class="w-3 h-3 text-success"></i>
                                        <span class="encrypted-indicator">已加密</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="group-actions">
                            <button class="action-btn">
                                <i data-lucide="message-circle" class="w-4 h-4"></i>
                            </button>
                            <button class="action-btn">
                                <i data-lucide="volume-x" class="w-4 h-4"></i>
                            </button>
                            <button class="action-btn">
                                <i data-lucide="more-vertical" class="w-4 h-4"></i>
                            </button>
                        </div>
                    </div>
                    <p class="text-sm text-muted-foreground mb-3">李四: 分享了一篇关于React性能优化的文章</p>
                    <div class="member-avatars">
                        <div class="member-avatar" style="background-color: var(--accent);">李</div>
                        <div class="member-avatar" style="background-color: var(--primary);">张</div>
                        <div class="member-avatar" style="background-color: var(--warning);">王</div>
                        <div class="member-avatar" style="background-color: #8b5cf6;">赵</div>
                        <div class="member-avatar" style="background-color: #06b6d4;">陈</div>
                        <div class="member-avatar more-members">+10</div>
                    </div>
                </div>

                <div class="group-item" data-status="inactive" data-type="member">
                    <div class="group-header">
                        <div class="group-info">
                            <div class="group-avatar" style="background-color: var(--warning);">
                                <i data-lucide="gamepad-2" style="color: white; width: 20px; height: 20px;"></i>
                            </div>
                            <div class="group-details">
                                <h3>游戏交流群</h3>
                                <div class="group-meta">
                                    <span>6名成员</span>
                                    <span>•</span>
                                    <span>3天前</span>
                                    <span>•</span>
                                    <div class="flex items-center gap-1">
                                        <i data-lucide="shield-check" class="w-3 h-3 text-success"></i>
                                        <span class="encrypted-indicator">已加密</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="group-actions">
                            <button class="action-btn">
                                <i data-lucide="message-circle" class="w-4 h-4"></i>
                            </button>
                            <button class="action-btn">
                                <i data-lucide="user-minus" class="w-4 h-4"></i>
                            </button>
                            <button class="action-btn">
                                <i data-lucide="more-vertical" class="w-4 h-4"></i>
                            </button>
                        </div>
                    </div>
                    <p class="text-sm text-muted-foreground mb-3">王五: 今晚一起玩游戏吗？</p>
                    <div class="member-avatars">
                        <div class="member-avatar" style="background-color: var(--warning);">王</div>
                        <div class="member-avatar" style="background-color: var(--primary);">张</div>
                        <div class="member-avatar" style="background-color: var(--accent);">李</div>
                        <div class="member-avatar more-members">+3</div>
                    </div>
                </div>

                <div class="group-item" data-status="active" data-type="owned">
                    <div class="group-header">
                        <div class="group-info">
                            <div class="group-avatar" style="background-color: var(--destructive);">
                                <i data-lucide="heart" style="color: white; width: 20px; height: 20px;"></i>
                            </div>
                            <div class="group-details">
                                <h3>家庭群聊</h3>
                                <div class="group-meta">
                                    <span>4名成员</span>
                                    <span>•</span>
                                    <span>1小时前</span>
                                    <span>•</span>
                                    <div class="flex items-center gap-1">
                                        <i data-lucide="shield-check" class="w-3 h-3 text-success"></i>
                                        <span class="encrypted-indicator">已加密</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="group-actions">
                            <button class="action-btn">
                                <i data-lucide="message-circle" class="w-4 h-4"></i>
                            </button>
                            <button class="action-btn">
                                <i data-lucide="settings" class="w-4 h-4"></i>
                            </button>
                            <button class="action-btn">
                                <i data-lucide="more-vertical" class="w-4 h-4"></i>
                            </button>
                        </div>
                    </div>
                    <p class="text-sm text-muted-foreground mb-3">妈妈: 晚上回家吃饭吗？</p>
                    <div class="member-avatars">
                        <div class="member-avatar" style="background-color: var(--destructive);">妈</div>
                        <div class="member-avatar" style="background-color: var(--primary);">爸</div>
                        <div class="member-avatar" style="background-color: var(--accent);">我</div>
                        <div class="member-avatar" style="background-color: var(--warning);">妹</div>
                    </div>
                </div>

                <div class="group-item" data-status="muted" data-type="member">
                    <div class="group-header">
                        <div class="group-info">
                            <div class="group-avatar" style="background-color: #6b7280;">
                                <i data-lucide="volume-x" style="color: white; width: 20px; height: 20px;"></i>
                            </div>
                            <div class="group-details">
                                <h3>通知群（已静音）</h3>
                                <div class="group-meta">
                                    <span>25名成员</span>
                                    <span>•</span>
                                    <span>2小时前</span>
                                    <span>•</span>
                                    <div class="flex items-center gap-1">
                                        <i data-lucide="volume-x" class="w-3 h-3 text-muted-foreground"></i>
                                        <span class="text-muted-foreground">已静音</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="group-actions">
                            <button class="action-btn">
                                <i data-lucide="message-circle" class="w-4 h-4"></i>
                            </button>
                            <button class="action-btn">
                                <i data-lucide="volume-2" class="w-4 h-4"></i>
                            </button>
                            <button class="action-btn">
                                <i data-lucide="more-vertical" class="w-4 h-4"></i>
                            </button>
                        </div>
                    </div>
                    <p class="text-sm text-muted-foreground mb-3">系统通知: 服务器维护完成</p>
                    <div class="member-avatars">
                        <div class="member-avatar" style="background-color: #6b7280;">系</div>
                        <div class="member-avatar" style="background-color: var(--primary);">张</div>
                        <div class="member-avatar" style="background-color: var(--accent);">李</div>
                        <div class="member-avatar" style="background-color: var(--warning);">王</div>
                        <div class="member-avatar more-members">+21</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- 底部状态栏 -->
        <div class="footer">
            <div class="flex items-center space-x-4">
                <span>共 <span id="visibleGroups">5</span> 个群组</span>
                <span>•</span>
                <span><span id="unreadCount">3</span> 个未读</span>
            </div>
            <div class="flex items-center space-x-2">
                <i data-lucide="shield-check" class="w-3 h-3 text-success"></i>
                <span class="encrypted-indicator">所有群组均已加密</span>
            </div>
        </div>

        <!-- 创建群组按钮 -->
        <button class="create-group-btn" id="createGroupBtn">
            <i data-lucide="plus" class="w-6 h-6"></i>
        </button>
    </div>

    <script>
        lucide.createIcons();
        
        // 筛选功能
        document.querySelectorAll('.filter-tab').forEach(tab => {
            tab.addEventListener('click', function() {
                // 移除所有活跃状态
                document.querySelectorAll('.filter-tab').forEach(t => t.classList.remove('active'));
                // 添加当前活跃状态
                this.classList.add('active');
                
                const filter = this.dataset.filter;
                const groups = document.querySelectorAll('.group-item');
                
                groups.forEach(group => {
                    const status = group.dataset.status;
                    const type = group.dataset.type;
                    
                    switch(filter) {
                        case 'all':
                            group.style.display = 'block';
                            break;
                        case 'active':
                            group.style.display = status === 'active' ? 'block' : 'none';
                            break;
                        case 'owned':
                            group.style.display = type === 'owned' ? 'block' : 'none';
                            break;
                        case 'muted':
                            group.style.display = status === 'muted' ? 'block' : 'none';
                            break;
                    }
                });
                
                updateCounts();
            });
        });
        
        // 搜索功能
        document.getElementById('searchInput').addEventListener('input', function() {
            const searchTerm = this.value.toLowerCase();
            const groups = document.querySelectorAll('.group-item');
            
            groups.forEach(group => {
                const name = group.querySelector('h3').textContent.toLowerCase();
                const lastMessage = group.querySelector('p').textContent.toLowerCase();
                
                if (name.includes(searchTerm) || lastMessage.includes(searchTerm)) {
                    group.style.display = 'block';
                } else {
                    group.style.display = 'none';
                }
            });
            
            updateCounts();
        });
        
        // 更新计数
        function updateCounts() {
            const visibleGroups = document.querySelectorAll('.group-item[style*="block"], .group-item:not([style*="none"])');
            document.getElementById('visibleGroups').textContent = visibleGroups.length;
        }
        
        // 创建群组
        document.getElementById('createGroupBtn').addEventListener('click', function() {
            alert('创建新群组功能');
        });
        
        // 群组项点击事件
        document.querySelectorAll('.group-item').forEach(item => {
            item.addEventListener('click', function(e) {
                // 如果点击的是按钮，不触发群组点击事件
                if (e.target.closest('button')) return;
                
                const groupName = this.querySelector('h3').textContent;
                console.log('进入群组:', groupName);
                // 这里可以跳转到群组聊天页面
            });
        });
        
        // 初始化计数
        updateCounts();
    </script>
</body>
</html>